@page "/goplanlists"
@using TeamAscend.Agapay.Web.Models

<div class="goplan-container">
    <div class="header-goplan">
        <h1 class="title">Go Plan</h1>
        <button class="add-button" @onclick="CreatePlan">
            <span class="plus-icon-container">
                <i class="fas fa-plus"></i>
            </span>
            Add
        </button>
    </div>

    <div class="plan-list">
        @foreach (var plan in userPlans)
        {
            <div class="plan-item">
                <span class="plan-name">@plan.Name</span>
                <button class="options-button" @onclick="() => OpenOptionsSheet(plan)">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        }
    </div>
</div>

<!-- Bottom Sheet -->
<div id="bottomSheet" class="bottom-sheet">
    <div class="sheet-content">
        <div class="sheet-handle"></div>
        <div class="sheet-section">
            <NavLink href="/plan" class="create-btn" @onclick="() => CloseBottomSheet()">
                <i class="fas fa-plus-circle"></i> Create New GoPlan
            </NavLink>
        </div>
        <div class="sheet-section">
            <p class="import-label">Import GoPlan</p>
            <input type="text" class="import-input" placeholder="Paste your link here" />
        </div>
    </div>
</div>

<!-- Options Bottom Sheet -->
<div id="optionsSheet" class="bottom-sheet">
    <div class="sheet-content">
        <div class="sheet-handle"></div>
        <p id="selectedPlanName" class="plan-title">@(selectedPlan?.Name ?? "")</p>
        <div class="sheet-option" @onclick="() => CopyShareCode(selectedPlan?.ShareCode)">
            <i class="fas fa-link"></i>
            <span>Copy Share Code</span>
        </div>
        <div class="sheet-option" @onclick="() => NavigateToEdit(selectedPlan?.ID ?? 0)">
            <i class="fas fa-edit"></i>
            <span>Edit GoPlan</span>
        </div>
        <div class="sheet-option" @onclick="() => DeletePlan(selectedPlan?.ID ?? 0)">
            <i class="fas fa-trash"></i>
            <span>Delete</span>
        </div>
    </div>
</div>

<!-- Overlay -->
<div id="overlay" class="overlay" @onclick="CloseAllSheets"></div>

